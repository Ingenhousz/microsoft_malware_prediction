from util import *
from feature_engineering import engineer_feature


# %% read in data
def main(debug=True):

    train, test, y_train, train_ids, test_ids, m = engineer_feature(debug)

    with timer('build RF model'):
        rf_train_result, rf_test_result, score = k_fold_rf(train, test, y_train, train_ids, test_ids,
                                                           m, debug)

    with timer('generate submission files'):
        data = [rf_train_result, rf_test_result]
        save_to_pickle(data, 'input/meta_rf.pkl')
        if not debug:
            save_submission(rf_test_result, score, 'rf')


if __name__ == '__main__':
    main(debug=False)
